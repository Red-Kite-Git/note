

# 网络模型结构

互联网的本质是一系列的网络协议，这个协议就叫做 OSI 协议（开放系统互联，Open System Interconnection），它是由 ISO（国际标准化组织）定义的

人们按照功能不同，分工不同，人为的将 OSI 的分为七层。实际上这七层是并不存在的，是一种概念模型

## 一、网络模型

![网络基础2](E:\CodeLearn\全栈笔记\resources\image\网络基础2.png)

### 1.OSI 七层模型（理论架构）

  七层模型大而全，但是比较复杂，有模型理论，而没有实际应用。OSI 中的上面4层（应用层、表示层、会话层、[传输层](https://so.csdn.net/so/search?q=传输层&spm=1001.2101.3001.7020)）为高层，定义了程序的功能；下面3层（网络层、数据链路层、物理层）为底层，主要是处理面向网络端到端的数据流。

### 2.TCP/IP 四层模型（实际互联网架构）

四层模型算是OSI的一种实现，是由实际应用发展总结出来的，包含应用层，传输层，网际层，网络接口层。不过从实质讲，TCP/IP 只有最上面三层，最下面一层没有什么具体内容，没有具体描述这一层的实现，只是要求能够给其上层（网络层），一个访问接口，以便在其上传递 IP 分组。

### 3. 网络五层模型

  五层模型出现在计算机网络教学中，是对七层和四层模型的一个折中，综合了 OSI 和 TCP/IP 体系结构的优点，既简洁又能将概念阐述清楚。



## 二、模型详解

![网络基础1](E:\CodeLearn\全栈笔记\resources\image\网络基础1.gif)

### 1.应用层

 应用层，是 OSI 的最高层，它是计算机用户与操作系统之间的接口，其功能是直接向用户提供服务，完成用户在计算机系统上的各种工作。并提供完成用户所提出的各种网络服务及应用所需的监督，管理，和服务等各种协议。

应用层为用户提供的服务和协议有：

文件服务
目录服务
文件传输服务（FTP）
远程登录服务（Telnet）
电子邮件服务（E-mail）
打印服务
安全服务
网络管理服务
数据库服务等
    上述不同的服务由该层不同的协议和程序完成，不同的操作系统之间在功能、界面、实现技术、对硬件的支持、安全可靠性以及具有的各种应用程序接口等各个方面的差异是很大的（参考Windows 和 Linux）。

应用层的主要功能就是完成用户与操作系统之间的交互。

### 2.表示层

表示层（Presentation Layer），对来自应用层的命令和数据进行解释，对各种语法赋予相应的含义，并按照一定的格式传送给会话层。

具体功能：

数据格式处理：协商和建立数据交换格式，解决各应用程序之间在数据格式上的差异。
数据的编码：如 JVM 将字节码翻译成操作系统能够执行的汇编语言。
压缩和解压缩：为了减少数据的传输量。
数据的加密解密：提供安全性。

### 3.会话层

会话层（Session Layer）是用户应用程序和网络之间的接口，它向两个实体的表示层提供建立和使用连接的方法。将不同实体间的表示层的连接成为会话。因此会话层的任务是：组织和协调两个会话进程间的通信，并对数据交换进行管理。

用户可以按照半双工（广播），单工（对讲机）和全双工（电话，网络）的方式建立会话。计算机的上传和下载使用的是两条通道（四根网线），这两条信道上的数据传播速率上传和下载速度。

当建立会话时，用户必须提供他们想要连接的远程地址。而这些地址与 MAC（介质访问控制子层）地址或网络层的逻辑地址不同，他们是为了用户专门设计的，便于用户记忆。域名（DN）就是一种网络上使用的远程。

会话层的具体功能如下：

会话管理：允许用户在两个实体设备之间建立联系、维持和终止会话，并支持他们之间的数据交换。例如提供单方向会话或者双向同时会话，并管理绘画中的发送顺序，以及会话所占用的时间长度。
寻址：使用远程地址建立会话连接。
出错控制：从逻辑上讲，会话层主要负责数据交换的建立、保持和终止，但时间的工作却是接收来自传输层的数据，并负责纠正错误。会话控制和远程过程调用均属于这一层的功能。但应注意，磁层检查的错误不是通信介质的错误，而是磁盘空间，打印机缺纸等类型的高级错误。

### 4.传输层

OSI 的上三层的主要任务是数据处理，下三层的主要任务是数据通信。而传输层是中间的第四层，是通信子网和资源子网的接口和桥梁，起到承上启下的作用。

该层的主要任务是：向用户提供可靠的端到端的差错和流量控制，保证报文的正确传输。传输层的作用是向高层屏蔽下层数据通信的细节，即向用户透明地传送报文。该层常见的协议有 TCP/IP 协议，Novell 网络中的 SPX 协议和微软的 NetBIOS/NetBEUI 协议。

传输层提供会话层和网络层之间的传输服务，这种服务从会话层获得数据，并在必要时，对数据进行分割。然后，传输层将数据传递到网络层，并确保数据能够准确无误地传送到网络层。因此，传输层负责两点之间数据的可靠传输，当两节点的联系确认之后，传输层则负责监督工作。

传输层的主要功能如下：

传输连接管理：提供简历，维护和拆除传输连接的功能。传输层在网络的基础上为高层提供面向连接和面向无连接的两种服务。
处理传输差错：提供可靠的面向连接（TCP）和不太可靠的面向无连接（UDP）的数据传输服务，差错控制和流量控制。在提供面向连接服务时，通过这一层传输的数据将由目标设备确认，如果在指定的时间未收到确认信息，数据将被重发。

### 5.网络层

网络层是 OSI 模型的第三层，它是 OSI 参考模型中最复杂的一层，也是通信子网的最高一层。它在下两层的基础上向资源子网提供服务。

其主要任务是：

通过路由选择算法，为报文或分组通过通信子网选择最适当的路径。
该层控制数据链路层与传输层之间的信息转发，建立，维持和终止网络的连接。
具体地说，数据链路层的数据在这一层被转换为数据包，然后通过路径选择，分段组合，顺序，进/出路由等控制，将信息从一个网络设备传动到另一个网络设备。
    一般来说，数据链路层是解决同一网络内节点之间的通信，而网络主要解决不同子网的通信。例如在广域网之间通信，必然会遇到路由（即两节点间可能有多条路径）选择问题。

在实现网络层功能时，需要解决的主要问题如下：

寻址：数据链路层中使用的物理地址（如 MAC 地址）仅解决网络内部的寻址问题。在不同子网通信时，为了识别和找到网络中的设备，每一子网中的设备都会被分配一个唯一的地址。由于各子网使用的物理技术可能不同，因此这个地址应当是逻辑地址（如 IP 地址）。
交换：规定不同的信息交换方式。常见的交换技术有：线路交换技术和存储转发技术，后者又包括报文交换技术和分组交换技术。
路由算法：当源节点和目的节点之间存在多条路径时，本层可以根据路由算法，通过网络为数据分组选择最佳路径，并将信息从最佳合适的路径由发送端传送到接收端。
连接服务：与数据链路层流量控制不同的是，前者控制的是网络相邻节点的流量，后者控制的是从源节点到目的节点间的流量。其目的在于防止阻塞，并进行差错检测。

### 6.数据链路层

 数据链路层是 OSI 模型的第二层，负责模型的第二层，负责建立和管理节点间的链路。

该层的主要功能是：

通过各种控制协议，将有差错的物理信道变为无差错的，能可靠传输数据帧的数据链路。
在计算机网络中由于各种干扰存在，物理链路是不可靠的。因此，这一层的主要功能是在物理层提供的比特流的基础上，通过差错控制，流量控制方法，使有差错的物理线路变为无差错的数据链路，即提供可靠的通过物理介质传输数据的方法。
该层通常又被分为介质访问控制（MAC）和逻辑链路控制（LLC）两个子层：

MAC 子层的主要任务是解决共享型网络中多用户对信道的竞争的问题，完成网络介质的访问控制；
LLC 子层的主要任务是建立和维护网络连接，执行差错校验，流量控制和链路控制。
    数据链路层的具体工作是接收来自物理层的位流形式的数据，并封装成帧，传送到上一层；同样，也将来自上层的数据帧，拆装为位流形式的数据转发到物理层；并且，还负责处理接收端发回的确认帧的消息，以便提供可靠的数据传输。

### 7.物理层

在 OSI 参考模型中，物理层是最底层，也是 OSI 模型的第一层。

物理层的主要功能是：

利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。
物理层的作用是实现相邻计算机节点间的比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。使其上面的数据链路层不必考虑网络的具体传输介质是什么。
透明传送比特流表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。